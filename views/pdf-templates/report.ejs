<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <!-- CSS only -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
</head>

<body>
  <div class="p-5">
    <h1 class="text-center mt-3">Sales report </h1>
    <% const months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];

    console.log(yearReport); 
    let totalSalesValue = 0;
    yearReport.OR.map(e=> totalSalesValue = totalSalesValue+e.total )
    yearReport.SH.map(e=> totalSalesValue = totalSalesValue+e.total )
    yearReport.OT.map(e=> totalSalesValue = totalSalesValue+e.total )
    yearReport.DD.map(e=> totalSalesValue = totalSalesValue+e.total )
    yearReport.CC.map(e=> totalSalesValue = totalSalesValue-e.total )
    
    
    %>

    <p class="mt-5">This year we manage to make total of <%= totalSalesValue %>Rs /- <br>
      <small> Each moths sales and order status listed below</small>
    </p>

    <table class="table table-borderless mt-4 rounded bg-light">
      <thead>
        <tr>
          <th scope="col">Month</th>
          <th scope="col">Ordered</th>
          <th scope="col">Total amount</th>
        </tr>
      </thead>
      <tbody>
        <% yearReport.OR.forEach((e,i) => { %>
        <tr>
          <td><%=months[Number(e.month)-1]%></td>
          <td><%= e.length %> </td>
          <td>₹ <%= e.total %></td>
        </tr>
        <% }); %>
      </tbody>
    </table>

    <table class="table table-borderless mt-4 rounded bg-light">
      <thead>
        <tr>
          <th scope="col">Month</th>
          <th scope="col">Shipped</th>
          <th scope="col">Total amount</th>
        </tr>
      </thead>
      <tbody>
        <% yearReport.SH.forEach((e,i) => { %>
        <tr>
          <td><%=months[Number(e.month)-1]%></td>
          <td><%= e.length %> </td>
          <td>₹ <%= e.total %></td>
        </tr>
        <% }); %>
      </tbody>
    </table>

    <table class="table table-borderless mt-4 rounded bg-light">
      <thead>
        <tr>
          <th scope="col">Month</th>
          <th scope="col">Reached</th>
          <th scope="col">Total amount</th>
        </tr>
      </thead>
      <tbody>
        <% yearReport.OT.forEach((e,i) => { %>
        <tr>
          <td><%=months[Number(e.month)-1]%></td>
          <td><%= e.length %> </td>
          <td>₹ <%= e.total %></td>
        </tr>
        <% }); %>
      </tbody>
    </table>
    <table class="table table-borderless mt-4 rounded bg-light">
      <thead>
        <tr>
          <th scope="col">Month</th>
          <th scope="col">Deleverd</th>
          <th scope="col">Total amount</th>
        </tr>
      </thead>
      <tbody>
        <% yearReport.DD.forEach((e,i) => { %>
        <tr>
          <td><%=months[Number(e.month)-1]%></td>
          <td><%= e.length %> </td>
          <td>₹ <%= e.total %></td>
        </tr>
        <% }); %>
      </tbody>
    </table>

  </div>
</body>

</html>