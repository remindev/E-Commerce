<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <!-- CSS only -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
</head>

<body>

  <style>
    html {
      font-size: small;
    }
  </style>

  <div class="p-5">
    <h1 class="text-center mt-3">Sales report </h1>
    <% const months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];

    let totalSalesValue = 0;
    yearReport.OR.map(e=> totalSalesValue = totalSalesValue+e.total )
    yearReport.SH.map(e=> totalSalesValue = totalSalesValue+e.total )
    yearReport.OT.map(e=> totalSalesValue = totalSalesValue+e.total )
    yearReport.DD.map(e=> totalSalesValue = totalSalesValue+e.total )
    yearReport.CC.map(e=> totalSalesValue = totalSalesValue-e.total )
    
    %>

    <p class="mt-5">This year we manage to make total of <%= yearReport?.DD[0]?.total? yearReport?.DD[0]?.total:0%>Rs /- <br>
      <small> Each moths sales and order status listed below</small>
    </p>

    <table class="table table-borderless mt-4 rounded bg-light">
      <thead>
        <tr style="font-weight: bold;">
          <td>Month</td>
          <td>Placed</td>
          <td>Revenue</td>
        </tr>
      </thead>
      <tbody>
        <% const OR = []; %>

        <!-- get values for each month -->
        <% for(let i=0; i<12; i++){  
          let acc = {};

          // loop for find values
          for (let j = 0; j < 12; j++) {

            if(yearReport.DD[j]?.month == (i+1)) {
              acc = yearReport.DD[j];
              break;
            }else{
              acc = {};
            };
          };
          // output
          OR.push(acc);
        } %>

        <% for(let i=0; i<12; i++){ %>
        <tr>
          <td><%= months[i] %> </td>
          <td><%= OR[i]?.length?OR[i].length:'-' %> </td>
          <td><%= OR[i]?.total?' â‚¹ '+ OR[i].total:'-' %></td>
        </tr>
        <% }; %>

      </tbody>
    </table>

    <h3 class="mx-2" style="margin-top: 30px;"><b>NOTE:</b> Report listed above contains data of placed orders of every month of this year</h3>
    <div class="" style="margin-top: 50px;"> 
    <img src="http://localhost:8080/img/logo.png" style="width: 100px;" alt="">
      <p class="m-2">This is an auto generated report </p>
    </div>
  </div>
</body>

</html>